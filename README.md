# 🚨 음주운전 사고 위험 지역 시각화 프로젝트
**Drunk Driving Accident Risk Visualization**

---

## 📌 1. 프로젝트 개요 및 목표

본 프로젝트는 공공 데이터 포털에서 제공하는 음주운전 사고 다발 지역 데이터를 분석하고, 웹 기반의 인터랙티브 지도에 입체적으로 시각화하여 대중의 경각심을 고취하고 정책 수립에 기여하는 것을 목표로 합니다.

- **목적:** 단순 좌표 표시를 넘어, 지역별 **위험도 점수(Risk Score)**를 산정하고 Choropleth Map과 Marker를 결합하여 광역 및 마이크로 위험도를 동시에 파악합니다.
- **핵심 결과물:** 최종 분석 결과가 담긴 단일 HTML 파일 형태로, 웹 서버 환경 없이도 즉시 실행 가능한 인터랙티브 지도.

---

## 🛠️ 2. 기술 스택 및 데이터 소스

### 2.1. 주요 기술 스택

| 영역 | 기술 | 활용 내용 |
|------|------|-----------|
| 데이터 처리 | Python (Pandas) | 사고 데이터 로드, 정규화, 위험도 점수 산정 |
| 지리 공간 분석 | GeoPandas | 사고 데이터와 GeoJSON 경계 데이터 병합, 좌표계 변환 및 GeoJSON 생성 |
| 웹 시각화 엔진 | Leaflet.js | 커스텀 GeoJSON 레이어 및 Circle Marker를 이용한 인터랙티브 지도 구현 |
| 프론트엔드 | HTML, JavaScript | 최종 결과물 컨테이너 및 동적 지도 로직 구현 |

### 2.2. 사용 데이터

| 데이터셋 | 파일명 | 출처 |
|-----------|--------|-----|
| 사고 다발 지역 | 19_24_drunk.csv | 공공 데이터 포털 |
| 행정 구역 경계 | korea_geojson.json | 통계청 (시/군/구 단위 GeoJSON) |

---

## ⚙️ 3. 데이터 전처리 및 위험도 산정 로직

시각화의 정확성을 보장하기 위해, 행정 구역 경계와 사고 데이터 간의 정확한 매핑 및 정량화된 위험 점수 산정이 핵심적으로 수행되었습니다.

### 3.1. 지역명 표준화 및 매핑

GeoJSON 경계 데이터와 사고 데이터의 지역명 표기 방식이 달라 단순 병합이 불가능했습니다.

- **문제:** 사고 데이터 (서울특별시 종로구) vs. GeoJSON 키 (종로구)
- **해결:** Python `re` 모듈을 사용하여 사고 데이터의 지역명에서 시/도 이름을 제거하고 시/군/구 이름만을 추출하여 GeoJSON의 행정 구역 키와 1:1 매칭

### 3.2. 위험 점수(Risk Score) 산정

- **정의:** 각 시/군/구 행정 구역의 사고 위험도는 해당 지역 내의 총 사고 건수의 합계로 정의
- **산정:** GeoPandas를 사용하여 사고 데이터를 행정 구역 기준으로 집계하고, 이 값을 최종 GeoJSON에 병합하여 Choropleth 시각화의 기준으로 활용

$$
\text{Risk Score}_{(\text{Region})} = \sum (\text{사고건수}_{\text{Region}})
$$

---

## 🗺️ 4. 시각화 구현 및 기술적 해결

### 4.1. 다중 레이어 시각화 전략

사용자가 광역 정보와 미시 정보를 동시에 파악할 수 있도록 두 가지 레이어를 결합했습니다.

- **Choropleth Layer (면적 지도)**
  - 정보: 시/군/구 단위의 총 사고 건수 (Risk Score)
  - 표현: 7단계 붉은 계열 색상으로 위험도 차이 강조
  - 상호작용: 마우스 오버 시 해당 지역의 정확한 위험 점수 팝업

- **Circle Marker Layer (개별 지점)**
  - 정보: 개별 사고 지점의 사고 건수
  - 표현: 마커 반지름과 색상 농도를 사고 건수에 비례하게 조정
  - 상호작용: 클릭 시 지점명, 사상자 수 등 상세 정보 팝업

### 4.2. 핵심 기술 문제 해결: 레이어 이벤트 겹침

| 문제점 | 해결 방법 | 적용 코드 |
|--------|-----------|-----------|
| 마커 클릭 불가 | Z-Index 조정: GeoJSON 레이어를 지도 최하단으로 이동 | `geoJsonLayer.bringToBack()` |
| 이벤트 전파 | 마커 클릭 이벤트가 하위 면적 레이어로 전파되는 것을 차단 | `L.DomEvent.stopPropagation(e)` |

---

## ▶️ 5. 프로젝트 실행 방법

본 프로젝트는 데이터 처리 및 HTML 생성 로직이 하나의 Python 스크립트 (`colab_data_injector.py`)에 통합되어 있어 Google Colab 환경에서 쉽게 실행 가능합니다.

### 5.1. 사전 준비 및 환경 설정

- **GitHub 저장소 주소:** [(https://github.com/zinuzanu/Drunk-Driving-Accident-Map-Viz.git)]
- **파일 준비:** `colab_data_injector.py`, `19_24_drunk.csv`, `korea_geojson.json` 다운로드 또는 Colab 업로드
- **순서대로 코드 실행**: 위에서 부터 아래로 코드 셀을 실행합니다.

  

